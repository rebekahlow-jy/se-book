<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CS2103/T Textbook - Error Handling</title>
    <link rel="stylesheet" href="..\markbind\css\bootstrap.min.css">
    <link rel="stylesheet" href="..\markbind\css\github.min.css">
</head>
<body>
<div id="app" class="container-fluid">
    <link rel="stylesheet" href="/se-book/css/textbook.css">
<div class="website-content">
  <h1 id="error-handling">Error Handling</h1>
  <h2 id="introduction">Introduction</h2>
  <panel header="================================================================" type="seamless" alt="introduction">
    <div>
      <div>
        <div>
          <h4 id="what-one">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can explain error handling <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <blockquote>
                <p>Well-written applications include error-handling code that allows them to recover gracefully from unexpected errors. When an error occurs, the application may need to request user intervention, or it may be able to recover on its own.
                  In extreme cases, the application may log the user off or shut down the system. <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms679320(v=vs.85).aspx">(source)</a></p>
              </blockquote>
            </div>
          </div>
        </panel>
      </div>
    </div>
  </panel>
  <h2 id="exceptions">Exceptions</h2>
  <panel header="================================================================" type="seamless" alt="exceptions">
    <div>
      <div>
        <div>
          <h4 id="what-one-2">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can explain exceptions <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>Exceptions are used to deal with ‚Äòunusual‚Äô but not entirely unexpected situations that the program might encounter at run time.</p>
              <tip-box type="primary">
                <div>
                  <p><strong>Exception</strong>:</p>
                  <blockquote>
                    <p>An <em>exception</em> is an event, which occurs during the execution of a program, that disrupts the normal flow of the program's instructions.</p>
                    <p>‚Äì- Java Tutorial (Oracle Inc.)</p>
                  </blockquote>
                </div>
              </tip-box>
              <tip-box>
                <p>Examples:</p>
                <ul>
                  <li>A network connection encounters a timeout due to a slow server.</li>
                  <li>The code tries to read a file from the hard disk but the file is corrupted and cannot be read.</li>
                </ul>
              </tip-box>
              <p>Exceptions are not program bugs. Rather, they are unusual situations that need to be recovered from, if possible.</p>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="how-two">How <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can do exception handling in code <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>However, the code segment that encountered the unusual situation might not know how to recover from it. That is why most languages allow a method to encapsulate the unusual situation in an Exception object and ‚Äòthrow‚Äô that object so that
                another piece of code can ‚Äòcatch‚Äô it and deal with it. Usually, an exception thrown by a method is caught by the caller method. If the called method does not know how to deal with the exception it caught, it will throw the Exception object
                to its own caller. If none of the callers is prepared to deal with the exception, the exceptions can propagate through the method call stack until it is received by the main method and thrown to the runtime, thus halting the system. In
                the Java code given below, <code>processArray</code> can potentially throw an <code>InvalidInputException</code>. Because of that, <code>processInput</code> method invokes <code>processArray</code> method inside a <code>try{ }</code> block
                and has a <code>catch{ }</code> block to specify what to do if the exception is actually thrown.</p>
              <tip-box>
                <p>Example:</p><img src="/se-book/errorHandling/exceptions/how/images/processInput.png" height="320">
                <p></p>
              </tip-box>
              <p>Advantages of exception handling in this way:</p>
              <ul>
                <li>The ability to propagate error information through the call stack.</li>
                <li>The separation of code that deals with ‚Äòunusual‚Äô situations from the code that does the ‚Äòusual‚Äô work.</li>
              </ul>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="when-three">When <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can explain ... <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>{to add: do not use exceptions for normal workflow}</p>
            </div>
          </div>
        </panel>
      </div>
    </div>
  </panel>
  <h2 id="assertions">Assertions</h2>
  <panel header="================================================================" type="seamless" alt="assertions">
    <div>
      <div>
        <div>
          <h4 id="what-two">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can explain assertions <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>Assertions are <strong>used to confirm assumptions about the program state</strong>. An assertion can be used to express something like ‚Äòwhen the execution comes to this point, the variable v cannot be null‚Äô. This implies that if v is null
                at that point, the code has a bug. If the runtime detects such an ‚Äòassertion failure‚Äô (think of it as an ‚Äòassumption violation), the runtime will typically take some drastic action such as terminating the execution with an error message.
                This is because an assertion failure is a confirmation of the code having a bug and the sooner the execution stops, the safer it is.</p>
              <tip-box>
                <p>Example:</p>
                <pre><code class="hljs java"><span class="hljs-keyword">int</span> timeout = Config.getTimeout(); <span class="hljs-comment">// line 1</span>
<span class="hljs-keyword">assert</span> timeout > <span class="hljs-number">0</span>; <span class="hljs-comment">// line 2</span>
setTimeout(timeout); <span class="hljs-comment">// line 3</span>
</code></pre>
                <p>In the Java code given above, the assertion in line 2 verifies the assumption that <code>timeout</code> returned by <code>Config.getTimeout()</code> is greater than 0. The only reason for it to return a zero or lower value in line 1 is
                  the presence of a bug in the system.</p>
              </tip-box>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="how-two-2">How <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can use assertions <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>It is recommended that assertions be used liberally in the code. If required, assertions can be disabled without modifying the code. For example, ‚Äò<code>java -enableassertions HelloWorld</code>‚Äô will run <code>HelloWorld</code> with assertions
                enabled while ‚Äò<code>java -disableassertions HelloWorld</code>‚Äô will run it without verifying assertions.</p>
              <tip-box type="info">
                <p>Notes:</p>
                <ol>
                  <li>The assertions mentioned above have a different purpose from the Assertions used in unit testing frameworks such as JUnit. Unit testing assertions are located outside the functional program and used for explicit testing of the program
                    before the system is put into use. The assertions discussed here are located inside the functional program and they verify assumptions while the system is running.</li>
                  <li>Some runtime environments disable assertions by default. This could create a situation where the developer thinks all assertions are being verified as true while in fact they are not being verified at all. Therefore, remember to enable
                    assertions when you run the program if you want them to be in effect.</li>
                </ol>
              </tip-box>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="when-three-2">When <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can use assertions optimally <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>Refer <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/language/assert.html#usage">this document</a> from Oracle to learn where to use assertions and where not to.</p>
            </div>
          </div>
        </panel>
      </div>
    </div>
  </panel>
  <h2 id="logging">Logging</h2>
  <panel header="================================================================" type="seamless" alt="logging">
    <div>
      <div>
        <div>
          <h4 id="what-one-3">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can explain logging <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>Logging is the deliberate recording of certain information during a program execution.</p>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="why-two">Why <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can explain the motivation for logging <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p><em>Logging</em> can be useful for troubleshooting problems the error handling code could not prevent (due to the failure to cater for certain situations).</p>
              <p>A good logging system records some system information regularly. When bad things happen to a system, their associated log files may provide indications of what went wrong and action can then be taken to prevent it from happening again. This
                is the same reason why airplanes have ‚Äòblack boxes‚Äô.</p>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="how-two-3">How <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can use logging <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>While it is relatively easy to implement a customized logging system (e.g. by inserting file I/O statements to write to a log file), most programming environments come with logging systems that allow more sophisticated forms of logging.
                For example, being able to enable and disable logging easily or to change the logging intensity/verbosity (i.e. how much information to record).</p>
              <p>Given below is a sample Java code that uses Java‚Äôs default logging mechanism. When running the code, the logging level can be set to WARNING so that log messages specified as INFO level will not be written to the log file at all.</p>
              <tip-box>
                <p>Example:</p>
                <pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.logging.*;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span></span>{
    <span class="hljs-comment">// Obtain a suitable logger.</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Logger logger = Logger.getLogger(<span class="hljs-string">"Foo"</span>);

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bar</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// log a message at INFO level</span>
        logger.log(Level.INFO, <span class="hljs-string">"going to start processing"</span>);
        <span class="hljs-keyword">try</span> {
            processInput();
        } <span class="hljs-keyword">catch</span> (Exception ex) {
            <span class="hljs-comment">//log a message at WARNING level</span>
            logger.log(Level.WARNING, <span class="hljs-string">"processing error"</span>, ex);
        }
        logger.log(Level.INFO, <span class="hljs-string">"end of processing"</span>);
    }
}
</code></pre>
              </tip-box>
            </div>
          </div>
        </panel>
      </div>
    </div>
  </panel>
  <h2 id="defensive-programming">Defensive Programming</h2>
  <panel header="================================================================" type="seamless" alt="defensive programming">
    <div>
      <div>
        <div>
          <h4 id="what-one-4">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can explain defensive programming <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>A defensive programmer codes under the assumption ‚Äúif we leave room for things to go wrong, they <em>will</em> go wrong‚Äù. Therefore, a defensive programmer proactively tries to eliminate any room for things to go wrong.</p>
              <tip-box>
                <p>Example:</p>
                <p>{Defensive copying}</p>
              </tip-box>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="enforcing-compulsory-associations-two">Enforcing Compulsory Associations <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can use defensive coding to enforce compulsory associations <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>Consider two classes, Account and Guarantor, with an association as shown in the following diagram:</p>
              <tip-box>
                <p>Example:</p><img src="/se-book/errorHandling/defensiveProgramming/compulsoryAssociations/images/accountGuarantor.png" height="50">
                <p></p>
                <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    Guarantor guarantor;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setGuarantor</span><span class="hljs-params">(Guarantor g)</span> </span>{
        guarantor = g;
    }
}
</code></pre>
                <p>Here, the association is compulsory i.e. an <code>Account</code> object should always be linked to a <code>Guarantor</code>. One way to implement this is to simply use a reference variable as above. However, what if someone else in the
                  team used the <code>Account</code> class as:</p>
                <pre><code class="hljs java">Account a = <span class="hljs-keyword">new</span> Account();
a.setGuarantor(<span class="hljs-keyword">null</span>);
</code></pre>
                <p>This results in an <code>Account</code> without a <code>Guarantor</code>! In a real banking system, this could have serious consequences! The code here did not try to prevent such a thing from happening. To proactively enforce the multiplicity
                  constraint, a solution is offered as follows:</p>
                <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    <span class="hljs-keyword">private</span> Guarantor guarantor;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Account</span><span class="hljs-params">(Guarantor g)</span></span>{
        <span class="hljs-keyword">if</span> (g == <span class="hljs-keyword">null</span>) stopSystemWithMessage(‚Äúmultiplicity violated. Null Guarantor ‚Äù);
        guarantor = g;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">setGuarantor</span> <span class="hljs-params">(Guarantor m)</span></span>{
        <span class="hljs-keyword">if</span> (g == <span class="hljs-keyword">null</span>) stopSystemWithMessage(‚Äúmultiplicity violated. Null Guarantor‚Äù);
        guarantor = g;
    }
    ‚Ä¶
}
</code></pre>
                <p>In the class Account, <code>guarantor</code> has to be declared as a private variable to prevent the value from being changed from outside the class.</p>
              </tip-box>
              <panel header=":paperclip: Extras" expandable="" type="seamless" expanded="">
                <panel header=":mortar_board: Learning Outcomes" expandable="" type="seamless">
                  <div>
                    <panel type="success" expandable=""><span slot="header"><div><p>üèÜ Can use defensive coding to enforce compulsory associations <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></p></div></span>
                      <div>
                        <panel header="Q: For the Manager class, write an addAccount() method.">
                          <question has-input="true">
                            <p>For the Manager class shown below, write an addAccount() method that</p>
                            <ul>
                              <li>restricts the maximum number of Accounts to 8</li>
                              <li>avoids adding duplicate Accounts</li>
                            </ul><img src="/se-book/errorHandling/defensiveProgramming/compulsoryAssociations/images/managerAccount.jpg" height="55">
                            <p></p>
                            <div slot="answer">
                              <pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Manager</span> </span>{
    <span class="hljs-keyword">private</span> ArrayList< Account > theAccounts ;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addAccount</span><span class="hljs-params">(Account acc)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span> (theAccounts.size( ) == <span class="hljs-number">8</span>)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception (<span class="hljs-string">"adding more than 8 accounts"</span>);

        <span class="hljs-keyword">if</span> (!theAccounts.contains(acc)) {
            theAccounts.add(acc) ;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeAccount</span><span class="hljs-params">(Account acc)</span> </span>{
        theAccounts.remove(acc) ;
    }
} <span class="hljs-comment">//end class</span>
</code></pre>
                            </div>
                          </question>
                        </panel>
                      </div>
                      <div>
                        <panel header="Q: Implement the classes below using the defensive coding approach.">
                          <question has-input="true">
                            <p>Implement the classes with appropriate references and operations to establish the association among the classes. Follow the defensive coding approach. Let the Marriage class handle setting/removal of reference.</p><img src="/se-book/errorHandling/defensiveProgramming/compulsoryAssociations/images/manMarriageWoman.jpg"
                              height="55">
                            <p></p>
                            <div slot="answer">
                              <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Marriage</span> </span>{
    <span class="hljs-keyword">private</span> Man husband = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> Woman wife = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">// extra information like date etc can be added</span>

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Marriage</span><span class="hljs-params">(Man m, Woman w)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span> (m == <span class="hljs-keyword">null</span> || w == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"no man/woman"</span>);
        }
        <span class="hljs-keyword">if</span> (m.isMarried() || w.isMarried()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"already married"</span>);
        }
        husband = m;
        m.enterMarriage(<span class="hljs-keyword">this</span>);
        wife = w;
        w.enterMarriage(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> Man <span class="hljs-title">getHusband</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span>(husband == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(‚Äúerror state‚Äù);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> husband;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> Woman <span class="hljs-title">getWife</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span>(wife == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(‚Äúerror state‚Äù);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> wife;
        }
    }

    <span class="hljs-comment">// removal of both ends of 'Marriage'</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">divorce</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span> (husband==<span class="hljs-keyword">null</span> || wife==<span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(‚Äúno marriage‚Äù);
        }
        husband.removeFromMarriage(<span class="hljs-keyword">this</span>);
        husband = <span class="hljs-keyword">null</span>;
        wife.removeFromMarriage(<span class="hljs-keyword">this</span>);
        wife = <span class="hljs-keyword">null</span>;
    }
} <span class="hljs-comment">// end class</span>
</code></pre>
                            </div>
                          </question>
                        </panel>
                      </div>
                      <div>
                        <panel header="Q: Give a suitable defensive implementation to the Account class.">
                          <question has-input="true">
                            <p>Give a suitable defensive implementation to the Account class in the following class diagram. Note that ‚Äú{immutable}‚Äù means once the association is formed, it cannot be changed.</p><img src="/se-book/errorHandling/defensiveProgramming/compulsoryAssociations/images/accountGuarantorImmutable.png"
                              height="80">
                            <p></p>
                            <div slot="answer">
                              <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    <span class="hljs-keyword">private</span> Guarantor myGuarantor; <span class="hljs-comment">// should not be public</span>

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Account</span><span class="hljs-params">(Guarantor g)</span></span>{
        <span class="hljs-keyword">if</span> (g==<span class="hljs-keyword">null</span>) {
            haltWithErrorMessage(‚ÄúAccount must have a guarantor‚Äù);
        }
        myGuarantor = g;
    }
    <span class="hljs-comment">// there should not be a setGuarantor method</span>
}
</code></pre>
                            </div>
                          </question>
                        </panel>
                      </div>
                    </panel>
                  </div>
                </panel>
              </panel>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="enforcing-1-to-1-associations-three">Enforcing 1-to-1 Associations <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can use defensive coding to enforce 1-to-1 associations <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>Consider the association given below. Here, a MinedCell cannot exist without a Mine and vice versa. The only way to enforce this is by simultaneous object creation. However, in Java and C++, only one object can be created at a time. Given
                below are two alternatives. Both options violate the multiplicity for a short period of time.</p>
              <tip-box>
                <p>Example:</p><img src="/se-book/errorHandling/defensiveProgramming/1to1Associations/images/minedCell.png" height="50">
                <p></p>
                <p>Option 1:</p>
                <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinedCell</span> </span>{
    <span class="hljs-keyword">private</span> Mine mine;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MinedCell</span><span class="hljs-params">(Mine m)</span></span>{
        <span class="hljs-keyword">if</span> (m == <span class="hljs-keyword">null</span>) error;
        mine = m;
    }
    ‚Ä¶
}
</code></pre>
                <p>Option 1 forces us to keep a <code>Mine</code> without a <code>MinedCell</code> (until the <code>MinedCell</code> is created).</p>
                <p>Option 2:</p>
                <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinedCell</span> </span>{
    <span class="hljs-keyword">private</span> Mine mine;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MinedCell</span><span class="hljs-params">()</span></span>{
        mine = <span class="hljs-keyword">new</span> Mine();
    }
    ‚Ä¶
}
</code></pre>
                <p>Option 2 is more defensive because the <code>Mine</code> is immediately linked to a <code>MinedCell</code>.</p>
              </tip-box>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="enforcing-referential-integrity-three">Enforcing Referential Integrity <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can use defensive coding to enforce referential integrity of bi-directional associations <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>A bidirectional association in the design (shown in (a)) is usually emulated at code level using two variables (as shown in (b)).</p>
              <tip-box>
                <p>Example:</p><img src="/se-book/errorHandling/defensiveProgramming/referentialIntegrity/images/manWoman.png" height="140">
                <p></p>
                <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Man</span> </span>{
    Woman girlfriend;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setGirlfriend</span><span class="hljs-params">(Woman w)</span> </span>{
        girlfriend = w;
    }
    ‚Ä¶
}
</code></pre>
                <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Woman</span> </span>{
    Man boyfriend;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setBoyfriend</span><span class="hljs-params">(Man m)</span> </span>{
        boyfriend = m;
    }
}
</code></pre>
              </tip-box>
              <p>The two classes are meant to be used as shown in (c) below. Now see what happens if the two classes were used as in (d) below. Now James' girlfriend is Jean, while Jean's boyfriend is not James. This situation results as the code was not
                defensive enough to stop this ‚Äúlove triangle‚Äù. In such a situation, we say that <em>the referential integrity has been violated</em>. It simply means <em>there is an inconsistency in object references</em>.</p>
              <tip-box>
                <p>c)</p>
                <pre><code class="hljs java">Woman jean;
Man james;
‚Ä¶
james.setGirlfriend(jean);
jean.setBoyfriend(james);
</code></pre>
              </tip-box>
              <tip-box>
                <p>d)</p>
                <pre><code class="hljs java">Woman jean; Man james, yong;
‚Ä¶
james.setGirlfriend(jean);  
jean.setBoyfriend(yong);  
</code></pre><img src="/se-book/errorHandling/defensiveProgramming/referentialIntegrity/images/woman.png" height="50">
                <p></p>
              </tip-box>
              <p>One way to prevent this situation is to implement the two classes as shown below. Note how the referential integrity is maintained.</p>
              <tip-box>
                <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Woman</span> </span>{
    <span class="hljs-keyword">private</span> Man boyfriend;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBoyfriend</span><span class="hljs-params">(Man m)</span> </span>{
        <span class="hljs-keyword">if</span>(boyfriend == m){
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (boyfriend != <span class="hljs-keyword">null</span>) {
            boyfriend.breakUp();
        }
        boyfriend = m;
        m.setGirlfriend(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">breakUp</span><span class="hljs-params">()</span> </span>{
        boyfriend = <span class="hljs-keyword">null</span>;
    }   
    ...
}
</code></pre>
                <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Man</span></span>{
    <span class="hljs-keyword">private</span> Woman girlfriend;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setGirlfriend</span><span class="hljs-params">(Woman w)</span> </span>{
        <span class="hljs-keyword">if</span>(girlfriend == w){
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (girlfriend != <span class="hljs-keyword">null</span>) {
            girlfriend.breakUp();
        }
        girlfriend = w;
        w.setBoyfriend(<span class="hljs-keyword">this</span>);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">breakUp</span><span class="hljs-params">()</span> </span>{
        girlfriend = <span class="hljs-keyword">null</span>;
    }  
   ...
}
</code></pre>
              </tip-box>
              <p>When the code <code>james.setGirlfriend(jean)</code> is executed, the code ensures that <code>james</code> break up with any current girlfriend before he accepts <code>jean</code> as the girlfriend. Furthermore, the code ensures that <code>jean</code>                breaks up with any existing boyfriends and accepts <code>james</code> as the boyfriend.</p>
              <panel header=":paperclip: Extras" expandable="" type="seamless" expanded="">
                <panel header=":mortar_board: Learning Outcomes" expandable="" type="seamless">
                  <div>
                    <panel type="success" expandable=""><span slot="header"><div><p>üèÜ Can use defensive coding to enforce referential integrity of bi-directional associations <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></p></div></span>
                      <div>
                        <panel header="Q: Implement the Player and Region classes using a more defensive approach.">
                          <question has-input="true">
                            <p>Imagine that we now support the following feature in our Minesweeper game.</p>
                            <tip-box>
                              <p>Feature ID: multiplayer Description: A minefield is divided into mine regions. Each region is assigned to a single player. Players can swap regions. To win the game, all regions must be cleared.</p>
                            </tip-box>
                            <p>Given below is an extract from our class diagram.</p><img src="/se-book/errorHandling/defensiveProgramming/referentialIntegrity/images/playerRegion.png" height="100">
                            <p></p>
                            <p>Minimally, this can be implemented like this.</p>
                            <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Player</span></span>{
    Region region;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setRegion</span><span class="hljs-params">(Region r)</span> </span>{ region = r;}
    <span class="hljs-function">Region <span class="hljs-title">getRegion</span><span class="hljs-params">()</span> </span>{<span class="hljs-keyword">return</span> region;}
} <span class="hljs-comment">// Region class is similar</span>
</code></pre>
                            <p>However, this is not very defensive. For example, a user of this class can pass a null to either of the methods, thus violating the multiplicity of the relationship.</p>
                            <p>Implement the two classes using a more defensive approach. Take note of the bidirectional link which requires us to preserve referential integrity at all times.</p>
                            <div slot="answer">
                              <p>In this solution, we assume Regions can be created without Players (note that we cannot be 100% defensive all the time). The usage will be something like this:</p>
                              <pre><code class="hljs java">Region r1 = <span class="hljs-keyword">new</span> Region();
Player p1 = <span class="hljs-keyword">new</span> Player(r1);
Region r2 = <span class="hljs-keyword">new</span> Region();
Player p2 = <span class="hljs-keyword">new</span> Player(r2);
p1.setRegion(r2);
r1.setPlayer(p2);
</code></pre>
                              <p>Here are the two classes. Get methods are omitted as they are simple. Note how much extra effort we need to be defensive.</p>
                              <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Region</span> </span>{
    <span class="hljs-keyword">private</span> Player myPlayer;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Region</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// initialise region</span>
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPlayer</span><span class="hljs-params">(Player newPlayer)</span> </span>{
        <span class="hljs-keyword">if</span> (newPlayer == <span class="hljs-keyword">null</span>) {
            stopSystemWithErrorMessage(<span class="hljs-string">"Multiplicity violation"</span>);
        }
        <span class="hljs-keyword">if</span> (myPlayer == newPlayer) {
            <span class="hljs-keyword">return</span>; <span class="hljs-comment">// same player</span>
        }
        <span class="hljs-keyword">if</span> (myPlayer != <span class="hljs-keyword">null</span>) {
            <span class="hljs-comment">// I already have a Player!</span>
            myPlayer.removeRegion(<span class="hljs-keyword">this</span>);
        }
        myPlayer = newPlayer;
        <span class="hljs-comment">// set the reverse link</span>
        myPlayer.setRegion(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removePlayer</span><span class="hljs-params">(Player disconnectingPlayer)</span> </span>{
        <span class="hljs-keyword">if</span> (myPlayer == disconnectingPlayer) myPlayer = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">else</span> stopSystemWithErrorMessage(<span class="hljs-string">"Unknown Player trying to disconnect"</span>)
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stopSystemWithErrorMessage</span><span class="hljs-params">(String msg)</span> </span>{
        ...
    }
}
</code></pre>
                              <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Player</span> </span>{
    <span class="hljs-keyword">private</span> Region myRegion;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Player</span><span class="hljs-params">(Region region)</span> </span>{
        setRegion(region);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRegion</span><span class="hljs-params">(Region newRegion)</span> </span>{
        <span class="hljs-keyword">if</span> (newRegion == <span class="hljs-keyword">null</span>) {
            stopSystemWithErrorMessage(<span class="hljs-string">"Multiplicity violation"</span>);
        }
        <span class="hljs-keyword">if</span> (myRegion == newRegion) {
            <span class="hljs-keyword">return</span>; <span class="hljs-comment">// no change in Region!</span>
        }
        <span class="hljs-keyword">if</span> (myRegion != <span class="hljs-keyword">null</span>) {
            <span class="hljs-comment">// previous region exists</span>
            myRegion.removePlayer(<span class="hljs-keyword">this</span>);
        }
        myRegion = newRegion;
        <span class="hljs-comment">// set the reverse link</span>
        myRegion.setPlayer(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeRegion</span><span class="hljs-params">(Region disconnectingRegion)</span> </span>{
        <span class="hljs-keyword">if</span> (myRegion == disconnectingRegion) myRegion = <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stopSystemWithErrorMessage</span><span class="hljs-params">(String msg)</span> </span>{
        ...
    }
}
</code></pre>
                              <p>Note that the above code stops the system when the multiplicity is violated. Alternatively, we can throw an exception and let the caller handle the situation.</p>
                            </div>
                          </question>
                        </panel>
                      </div>
                      <div>
                        <panel header="Q: Implement the bidirectional association between Bank and Account.">
                          <question has-input="true">
                            <p>Implement this bidirectional association. Note that the Bank uses accNumber attribute to uniquely identify an Account object. Assume the Bank class is responsible for maintaining the links between objects.</p><img src="/se-book/errorHandling/defensiveProgramming/referentialIntegrity/images/bankAccount.jpg"
                              height="60">
                            <p></p>
                            <div slot="answer">
                              <p>The code below contains a method in the Bank class to create an account; the bank field in the new account is thereby filled by the bank creating it.</p>
                              <p>We assume that once an Account has been assigned to one Bank, it cannot be assigned to a different Bank. Once the Account is removed from the Bank, it will not be used any more (hence, no need to remove the link from Account
                                to Bank).</p>
                              <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> accNumber ;
    <span class="hljs-keyword">private</span> Bank theBank ;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Account</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, Bank b)</span> </span>{
        accno = n ;
        theBank = b ;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getNumber</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> accNumber;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> Bank <span class="hljs-title">getBank</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> theBank ;
    }
}
</code></pre>
                              <pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bank</span> </span>{
    <span class="hljs-keyword">private</span> HashMap< Integer, Account > theAccounts = <span class="hljs-keyword">new</span> HashMap < Integer, Account > ();

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">createAccount</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>{
        addAccount(<span class="hljs-keyword">new</span> Account(n, <span class="hljs-keyword">this</span>)) ;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addAccount</span><span class="hljs-params">(Account a)</span> </span>{          
        theAccounts.put(a.getNumber(), a);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeAccount</span><span class="hljs-params">(<span class="hljs-keyword">int</span> accNumber)</span> </span>{
        theAccounts.remove(accNumber);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> Account <span class="hljs-title">lookupAccount</span><span class="hljs-params">(<span class="hljs-keyword">int</span> accNumber)</span> </span>{
        <span class="hljs-keyword">return</span> theAccounts.get(accNumber);
    }
}
</code></pre>
                            </div>
                          </question>
                        </panel>
                      </div>
                      <div>
                        <panel header="Q: Is the code given below a defensive translation of the associations shown in the class diagram?">
                          <question has-input="true">
                            <p>(a) Is the code given below a defensive translation of the associations shown in the class diagram? Explain your answer.</p>
                            <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Teacher</span></span>{
    <span class="hljs-keyword">private</span> Student favStudent;
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFavStudent</span><span class="hljs-params">(Student s)</span></span>{
        favStudent = s;
    }
}
</code></pre>
                            <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span></span>{
    <span class="hljs-keyword">private</span> Teacher favTeacher;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFavTeacher</span><span class="hljs-params">(Teacher t)</span></span>{
        favTeacher = t;
    }
}
</code></pre><img src="/se-book/errorHandling/defensiveProgramming/referentialIntegrity/images/teacherStudent.png" height="80">
                            <p></p>
                            <p>(b) In terms of maintaining referential integrity in the implementation, what is the difference between the following two diagrams?</p><img src="/se-book/errorHandling/defensiveProgramming/referentialIntegrity/images/teacherStudent.png"
                              height="80">
                            <p></p><img src="/se-book/errorHandling/defensiveProgramming/referentialIntegrity/images/manWomanAssoc.png" height="60">
                            <p></p>
                            <p>(c) Show a defensive implementation of the remove(Member m) of the Club class given below.</p><img src="/se-book/errorHandling/defensiveProgramming/referentialIntegrity/images/clubMember.png" height="60">
                            <p></p>
                            <div slot="answer">
                              <p>(a) Yes. Each links is mutable and unidirectional. A simple reference variable is suitable to hold the link.</p>
                              <p><code>Teacher</code> class can be made even more defensive by introducing a <code>resetFavStudent()</code> method to unlink the current favorite student from a teacher. In that case, <code>setFavStudent(Student)</code> method
                                should not accept null. This approach is more defensive because it prevents a null value being passed to <code>setFavStudent(Student)</code> by mistake and being interpreted as a request to delink the current favorite student
                                from the Teacher object.</p>
                              <p>(b) First diagram has unidirectional links. Second has a bidirectional link. RI is only applicable to the second.</p>
                              <p>(c)</p>
                              <pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">removeMember</span><span class="hljs-params">(Member m)</span> </span>{
    <span class="hljs-keyword">if</span> (m==<span class="hljs-keyword">null</span>) <span class="hljs-keyword">throw</span> exception(‚Äú<span class="hljs-keyword">this</span> is <span class="hljs-keyword">null</span>, not a member!‚Äù);
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(member_count == <span class="hljs-number">10</span>) <span class="hljs-keyword">throw</span> exception(‚Äúwe need at least <span class="hljs-number">10</span> members to survive!‚Äù);
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!isMember(m)) <span class="hljs-keyword">throw</span> exception (‚Äú<span class="hljs-keyword">this</span> fellow is not a member of our club!‚Äù);
    <span class="hljs-keyword">else</span> members.remove(m); <span class="hljs-comment">// members is a data structure such as ArrayList</span>
}
</code></pre>
                            </div>
                          </question>
                        </panel>
                      </div>
                    </panel>
                  </div>
                </panel>
              </panel>
            </div>
          </div>
        </panel>
      </div>
      <div>
        <div>
          <h4 id="when-two">When <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can explain when to use defensive programming <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>It is not necessary to be 100% defensive all the time. While defensive code may be less prone to be misused or abused, such code can also be more complicated and slower to run.</p>
              <p>The degree of defensiveness depends on many factors such as:</p>
              <ul>
                <li>How critical is the reliability of the system?</li>
                <li>Will the code be used by programmers other than the author?</li>
                <li>The level of programming language support for defensive programming</li>
                <li>The overhead of being defensive.</li>
              </ul>
            </div>
          </div>
        </panel>
      </div>
    </div>
  </panel>
  <h2 id="design-by-contract-approach">Design-by-Contract Approach</h2>
  <panel header="================================================================" type="seamless" alt="logging">
    <div>
      <div>
        <div>
          <h4 id="what-three">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
        </div>
        <tip-box type="success">
          <div>
            <ul>
              <li><span id="outcome-explain">üèÜ Can explain DbC approach <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></span></li>
            </ul>
          </div>
        </tip-box>
        <panel type="seamless" header=" %%- - - - - - - - - -%%">
          <div>
            <div>
              <p>Suppose an operation is implemented with the behavior specified precisely in the API (preconditions, post conditions, exceptions etc.). When following the defensive approach, the code should first check if the preconditions have been met.
                Typically, exceptions are thrown if preconditions are violated. In contrast, the <em>Design-by-Contract (DbC)</em> approach to coding assumes that it is the responsibility of the caller to ensure all preconditions are met. The operation
                will honor the contract only if the preconditions have been met. If any of them have not been met, the behavior of the operation is ‚Äúunspecified‚Äù.</p>
              <p>Languages such as Eiffel have native support for DbC. For example, preconditions of an operation can be specified in Eiffel and the language runtime will check precondition violations without the need to do it explicitly in the code. To
                follow the DbC approach in languages such as Java and C++ where there is no built-in DbC support, assertions can be used to confirm pre-conditions.</p>
            </div>
          </div>
        </panel>
      </div>
    </div>
  </panel>
</div>
</div>
</body>
<script src="..\markbind\js\vue.min.js"></script>
<script src="..\markbind\js\vue-strap.min.js"></script>
<script src="..\markbind\js\setup.js"></script>
</html>
